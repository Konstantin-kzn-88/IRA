На этой диаграмме показано:

Клиентский код (example_usage.py) - это точка входа, которая использует нашу систему
Substance - модель данных, которая:

Хранит данные о веществе
Проводит валидацию данных
Не знает ничего о базе данных


SubstanceRepository - интерфейс, определяющий методы работы с веществами
SQLiteSubstanceRepository - реализация репозитория, которая:

Реализует интерфейс SubstanceRepository
Преобразует объекты Substance в запросы к базе данных
Преобразует ответы базы данных обратно в объекты Substance


База данных SQLite - хранит данные

Основной поток данных:

Клиент создает объект вещества
Передает его в репозиторий
Репозиторий проверяет данные
Сохраняет в базу
Возвращает результат клиенту

Это обеспечивает:

Четкое разделение ответственности
Изоляцию бизнес-логики от деталей хранения
Возможность легкой замены компонентов